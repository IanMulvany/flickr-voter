

<html>
<head>
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
    <link type="text/css" rel="stylesheet" href="/stylesheets/activities.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>

<script type="text/javascript">
    (function($) { $(document).ready(function() {
            $('#jqueryresult').click(function() { 
                $.ajax({
                    type: 'POST', 
                    url: '/rpcincrement', 
                    dataType: 'html', 
                    success: function(html, textStatus) {
                        $('#jqueryresult').append(html);
                        }, 
                    error: function(xhr, textStatus, errorThrown) {
                        alert('An error occurred! '+ ( errorThrown ? errorThrown : xhr.status ) );
                        },
                     });
                });

 {% for activity in activities %}
        
            $('#{{ forloop.counter }}{{ activity.0.activity_id }}').click(function() { 
                $.ajax({
                    type: 'POST', 
                    url: '/rpcincrement?actor={{ activity.0.author }}&activityid={{ activity.0.activity_id }}', 
                    dataType: 'html', 
                    success: function(html, textStatus) {
                        $('#{{ forloop.counter }}{{ activity.0.activity_id }}').append(html);
                        }, 
                    error: function(xhr, textStatus, errorThrown) {
                        alert('An error occurred! '+ ( errorThrown ? errorThrown : xhr.status ) );
                        },
                     });
                });
 {% endfor %}
              })})
        (jQuery);
</script>    

</head>
  <body>

    <div id="jqueryresult">jqueryVoteUp</div>

    you want a list of all activities that we have looked at so far
    in total there are {{ count }} they are
    
      <p>
     {% if previous %}
      <a href="?newest=true">&lt;&lt;newest</a>              
      <a href="?previous={{ previous }}">&lt;newer</a>     
     {% endif %}
     {% if next %}
      <a href="?next={{ next }}">older&gt;</a>      
      <a href="?oldest=true">oldest&gt;&gt;</a>        
     {% endif %}
      </p>
        
        {% for activity in activities %}
    <div id="activityrecord">
        
    <div id="{{ forloop.counter }}{{ activity.0.activity_id }}">jqueryVoteUp</div>

             <p> 
                <a href="{{ activity.1 }}"><img src="{{ activity.2 }}"></a> 
             </p>
            
           {{ activity.0.author }} added a {{ activity.0.activity_type }} that said  {{ activity.0.activity_content }}
         

           <div id="votetotals">
                vote total: <span id="total">{{ activity.0.vote_sum }}</span>,
                votes cast: <span id="cast">{{ activity.0.vote_count }}</span> 
           </div>


           <div id="voting"> 

            <form action="/publicincrement?actor={{ activity.0.author }}&activityid={{ activity.0.activity_id }}" method="post">
                <div><input type="submit" value="public vote"></div>
            </form>   

            <form action="/increment?actor={{ activity.0.author }}&activityid={{ activity.0.activity_id }}" method="post">
                <div><input type="submit" value="give cookie"></div>
            </form>   
            <form action="/decrement?actor={{ activity.0.author }}&activityid={{ activity.0.activity_id }}" method="post">
                <div><input type="submit" value="take cookie away"></div>
            </form>

           </div>
           
            {% if admin %}
              activity creation time: {{ activity.0.created }}  
            {% endif %}
           
            </div>
        {% endfor %}
        


{% extends "admincontrols.html" %}
  </body>
</html>

